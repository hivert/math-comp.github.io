<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>fsbigop</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library fsbigop</h1>

<div class="code">
<span class="comment">(*&nbsp;mathcomp&nbsp;analysis&nbsp;(c)&nbsp;2017&nbsp;Inria&nbsp;and&nbsp;AIST.&nbsp;License:&nbsp;CeCILL-C.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">mathcomp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">all_ssreflect</span> <span class="id" title="var">ssralg</span> <span class="id" title="var">ssrnum</span> <span class="id" title="var">ssrint</span> <span class="id" title="var">interval</span> <span class="id" title="var">finmap</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">mathcomp.classical</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">mathcomp_extra</span> <span class="id" title="var">boolp</span> <span class="id" title="var">classical_sets</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">mathcomp.classical</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">functions</span> <span class="id" title="var">cardinality</span>.<br/>

<br/>
</div>

<div class="doc">
                     Finitely-supported big operators                       

<div class="paragraph"> </div>

     finite_support idx D F := D `&amp;` F @^-1` [set~ idx]                     
 \big[op/idx](i \in A) F i == iterated application of the operator op      
                               with neutral idx over finite_support idx A F 
         \sum(i \in A) F i == iterated addition, in ring_scope             
                                                                             
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;\big [ op / idx ]_ ( i '\in' A ) F"<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 36, <span class="id" title="var">F</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 36, <span class="id" title="var">op</span>, <span class="id" title="var">idx</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 10, <span class="id" title="var">i</span>, <span class="id" title="var">A</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">format</span> "'[' \big [ op / idx ]_ ( i  '\in'  A ) '/  '  F ']'").<br/>

<br/>
<span class="id" title="keyword">Reserved Notation</span> &quot;\sum_ ( i '\in' A ) F"<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 41, <span class="id" title="var">F</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 41, <span class="id" title="var">i</span>, <span class="id" title="var">A</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">format</span> "'[' \sum_ ( i  '\in'  A ) '/  '  F ']'").<br/>

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">Order.TTheory</span> <span class="id" title="var">GRing.Theory</span> <span class="id" title="var">Num.Def</span> <span class="id" title="var">Num.Theory</span>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">classical_set_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">ring_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;\big [ op / idx ]_ ( i '\in' A ) F" :=<br/>
&nbsp;&nbsp;(\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> &lt;- <span class="id" title="var">fset_set</span> (<span class="id" title="var">A</span> `&amp;` ((<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> ⇒ <span class="id" title="var">F</span>) @^-1` [<span class="id" title="tactic">set</span>¬ <span class="id" title="var">idx</span>]))) <span class="id" title="var">F</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">big_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">finite_index_key</span> : <span class="id" title="var">unit</span>.  <br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">finite_support</span> {<span class="id" title="var">I</span> : <span class="id" title="var">choiceType</span>} {<span class="id" title="var">T</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">idx</span> : <span class="id" title="var">T</span>) (<span class="id" title="var">D</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="var">T</span>) : <span class="id" title="var">seq</span> <span class="id" title="var">I</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">locked_with</span> <span class="id" title="var">finite_index_key</span> (<span class="id" title="var">fset_set</span> (<span class="id" title="var">D</span> `&amp;` <span class="id" title="var">F</span> @^-1` [<span class="id" title="tactic">set</span>¬ <span class="id" title="var">idx</span>] : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>)).<br/>
<span class="id" title="keyword">Notation</span> &quot;\big [ op / idx ]_ ( i '\in' D ) F" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> &lt;- <span class="id" title="var">finite_support</span> <span class="id" title="var">idx</span> <span class="id" title="var">D</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">i</span> ⇒ <span class="id" title="var">F</span>)) <span class="id" title="var">F</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">big_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">in_finite_support</span> (<span class="id" title="var">T</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">J</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">i</span> : <span class="id" title="var">T</span>) (<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">J</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">F</span> : <span class="id" title="var">J</span> → <span class="id" title="var">T</span>) : <span class="id" title="var">finite_set</span> (<span class="id" title="var">P</span> `&amp;` <span class="id" title="var">F</span> @^-1` [<span class="id" title="tactic">set</span>¬ <span class="id" title="var">i</span>]) →<br/>
&nbsp;&nbsp;<span class="id" title="var">finite_support</span> <span class="id" title="var">i</span> <span class="id" title="var">P</span> <span class="id" title="var">F</span> =<span class="id" title="var">i</span> <span class="id" title="var">P</span> `&amp;` <span class="id" title="var">F</span> @^-1` [<span class="id" title="tactic">set</span>¬ <span class="id" title="var">i</span>].<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">finite_support_uniq</span> (<span class="id" title="var">T</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">J</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">i</span> : <span class="id" title="var">T</span>) (<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">J</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">F</span> : <span class="id" title="var">J</span> → <span class="id" title="var">T</span>) : <span class="id" title="var">uniq</span> (<span class="id" title="var">finite_support</span> <span class="id" title="var">i</span> <span class="id" title="var">P</span> <span class="id" title="var">F</span>).<br/>
 #[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">finite_support_uniq</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">no_finite_support</span> (<span class="id" title="var">T</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">J</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">i</span> : <span class="id" title="var">T</span>) (<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">J</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">F</span> : <span class="id" title="var">J</span> → <span class="id" title="var">T</span>) : <span class="id" title="var">infinite_set</span> (<span class="id" title="var">P</span> `&amp;` <span class="id" title="var">F</span> @^-1` [<span class="id" title="tactic">set</span>¬ <span class="id" title="var">i</span>]) →<br/>
&nbsp;&nbsp;<span class="id" title="var">finite_support</span> <span class="id" title="var">i</span> <span class="id" title="var">P</span> <span class="id" title="var">F</span> = [::].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eq_finite_support</span> {<span class="id" title="var">I</span> : <span class="id" title="var">choiceType</span>} {<span class="id" title="var">T</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">idx</span> : <span class="id" title="var">T</span>) (<span class="id" title="var">D</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">F</span> <span class="id" title="var">G</span> : <span class="id" title="var">I</span> → <span class="id" title="var">T</span>) : {<span class="id" title="tactic">in</span> <span class="id" title="var">D</span>, <span class="id" title="var">F</span> =1 <span class="id" title="var">G</span>} →<br/>
&nbsp;&nbsp;<span class="id" title="var">finite_support</span> <span class="id" title="var">idx</span> <span class="id" title="var">D</span> <span class="id" title="var">F</span> = <span class="id" title="var">finite_support</span> <span class="id" title="var">idx</span> <span class="id" title="var">D</span> <span class="id" title="var">G</span>.<br/>

<br/>
<span class="id" title="keyword">Variant</span> <span class="id" title="var">finite_support_spec</span> <span class="id" title="var">R</span> (<span class="id" title="var">T</span> : <span class="id" title="var">choiceType</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">T</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">T</span> → <span class="id" title="var">R</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) : <span class="id" title="var">seq</span> <span class="id" title="var">T</span> → <span class="id" title="keyword">Type</span> :=<br/>
| <span class="id" title="var">NoFiniteSupport</span> <span class="id" title="keyword">of</span> <span class="id" title="var">infinite_set</span> (<span class="id" title="var">P</span> `&amp;` <span class="id" title="var">F</span> @^-1` [<span class="id" title="tactic">set</span>¬ <span class="id" title="var">idx</span>]) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">finite_support_spec</span> <span class="id" title="var">P</span> <span class="id" title="var">F</span> <span class="id" title="var">idx</span> [::]<br/>
| <span class="id" title="var">FiniteSupport</span> (<span class="id" title="var">X</span> : {<span class="id" title="var">fset</span> <span class="id" title="var">T</span>}) <span class="id" title="keyword">of</span> [<span class="id" title="tactic">set</span>` <span class="id" title="var">X</span>] `&lt;=` <span class="id" title="var">P</span><br/>
&nbsp;&nbsp;&nbsp;&amp; (<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <span class="id" title="var">P</span> <span class="id" title="var">i</span> → <span class="id" title="var">i</span> \<span class="id" title="var">notin</span> <span class="id" title="var">X</span> → <span class="id" title="var">F</span> <span class="id" title="var">i</span> = <span class="id" title="var">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&amp; [<span class="id" title="tactic">set</span>` <span class="id" title="var">X</span>] = (<span class="id" title="var">P</span> `&amp;` <span class="id" title="var">F</span> @^-1` [<span class="id" title="tactic">set</span>¬ <span class="id" title="var">idx</span>]) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">finite_support_spec</span> <span class="id" title="var">P</span> <span class="id" title="var">F</span> <span class="id" title="var">idx</span> <span class="id" title="var">X</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">finite_supportP</span> <span class="id" title="var">R</span> (<span class="id" title="var">T</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">T</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">T</span> → <span class="id" title="var">R</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">finite_support_spec</span> <span class="id" title="var">P</span> <span class="id" title="var">F</span> <span class="id" title="var">idx</span> (<span class="id" title="var">finite_support</span> <span class="id" title="var">idx</span> <span class="id" title="var">P</span> <span class="id" title="var">F</span>).<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;\sum_ ( i '\in' A ) F" := (\<span class="id" title="var">big</span>[+%<span class="id" title="var">R</span>/0%<span class="id" title="var">R</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">A</span>) <span class="id" title="var">F</span>) : <span class="id" title="var">ring_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eq_fsbigl</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">R</span> → <span class="id" title="var">R</span> → <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">T</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">T</span> → <span class="id" title="var">R</span>) (<span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">T</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">P</span> = <span class="id" title="var">Q</span> → \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">x</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">f</span> <span class="id" title="var">x</span> = \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">x</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>) <span class="id" title="var">f</span> <span class="id" title="var">x</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">eq_fsbigr</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">T</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">T</span> → <span class="id" title="var">R</span>) (<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">T</span>) :<br/>
&nbsp;&nbsp;{<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>, <span class="id" title="var">f</span> =1 <span class="id" title="var">g</span>} → (\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">x</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">f</span> <span class="id" title="var">x</span> = \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">x</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">g</span> <span class="id" title="var">x</span>).<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">eq_fsbigr</span> {<span class="id" title="var">R</span> <span class="id" title="var">idx</span> <span class="id" title="var">op</span> <span class="id" title="var">T</span> <span class="id" title="var">f</span>} <span class="id" title="var">g</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbigTE</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>) (<span class="id" title="var">T</span> : <span class="id" title="var">choiceType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">A</span> : {<span class="id" title="var">fset</span> <span class="id" title="var">T</span>}) (<span class="id" title="var">f</span> : <span class="id" title="var">T</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <span class="id" title="var">i</span> \<span class="id" title="var">notin</span> <span class="id" title="var">A</span> → <span class="id" title="var">f</span> <span class="id" title="var">i</span> = <span class="id" title="var">idx</span>) →<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> [<span class="id" title="tactic">set</span>: <span class="id" title="var">T</span>]) <span class="id" title="var">f</span> <span class="id" title="var">i</span> = \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> &lt;- <span class="id" title="var">A</span>) <span class="id" title="var">f</span> <span class="id" title="var">i</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">fsbigTE</span> {<span class="id" title="var">R</span> <span class="id" title="var">idx</span> <span class="id" title="var">op</span> <span class="id" title="var">T</span>} <span class="id" title="var">A</span> <span class="id" title="var">f</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbig_mkcond</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">T</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">A</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">T</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">T</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">A</span>) <span class="id" title="var">f</span> <span class="id" title="var">i</span> =<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> [<span class="id" title="tactic">set</span>: <span class="id" title="var">T</span>]) <span class="id" title="var">patch</span> (<span class="id" title="keyword">fun</span>⇒ <span class="id" title="var">idx</span>) <span class="id" title="var">A</span> <span class="id" title="var">f</span> <span class="id" title="var">i</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbig_mkcondr</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">T</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">I</span> <span class="id" title="var">J</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">T</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">T</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">I</span> `&amp;` <span class="id" title="var">J</span>) <span class="id" title="var">a</span> <span class="id" title="var">i</span> =<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">I</span>) <span class="id" title="keyword">if</span> <span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">J</span> <span class="id" title="keyword">then</span> <span class="id" title="var">a</span> <span class="id" title="var">i</span> <span class="id" title="keyword">else</span> <span class="id" title="var">idx</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbig_mkcondl</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">T</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">I</span> <span class="id" title="var">J</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">T</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">T</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">I</span> `&amp;` <span class="id" title="var">J</span>) <span class="id" title="var">a</span> <span class="id" title="var">i</span> =<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">J</span>) <span class="id" title="keyword">if</span> <span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">I</span> <span class="id" title="keyword">then</span> <span class="id" title="var">a</span> <span class="id" title="var">i</span> <span class="id" title="keyword">else</span> <span class="id" title="var">idx</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">bigfs</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>) (<span class="id" title="var">T</span> : <span class="id" title="var">choiceType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">seq</span> <span class="id" title="var">T</span>) (<span class="id" title="var">P</span> : {<span class="id" title="var">pred</span> <span class="id" title="var">T</span>}) (<span class="id" title="var">f</span> : <span class="id" title="var">T</span> → <span class="id" title="var">R</span>) : <span class="id" title="var">uniq</span> <span class="id" title="var">r</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <span class="id" title="var">P</span> <span class="id" title="var">i</span> → <span class="id" title="var">i</span> \<span class="id" title="var">notin</span> <span class="id" title="var">r</span> → <span class="id" title="var">f</span> <span class="id" title="var">i</span> = <span class="id" title="var">idx</span>) →<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> &lt;- <span class="id" title="var">r</span> | <span class="id" title="var">P</span> <span class="id" title="var">i</span>) <span class="id" title="var">f</span> <span class="id" title="var">i</span> = \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> [<span class="id" title="tactic">set</span>` <span class="id" title="var">P</span>]) <span class="id" title="var">f</span> <span class="id" title="var">i</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbigE</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>) (<span class="id" title="var">T</span> : <span class="id" title="var">choiceType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">A</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">T</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">seq</span> <span class="id" title="var">T</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">T</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">uniq</span> <span class="id" title="var">r</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id" title="tactic">set</span>` <span class="id" title="var">r</span>] `&lt;=` <span class="id" title="var">A</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <span class="id" title="var">A</span> <span class="id" title="var">i</span> → <span class="id" title="var">i</span> \<span class="id" title="var">notin</span> <span class="id" title="var">r</span> → <span class="id" title="var">f</span> <span class="id" title="var">i</span> = <span class="id" title="var">idx</span>) →<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">A</span>) <span class="id" title="var">f</span> <span class="id" title="var">i</span> = \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> &lt;- <span class="id" title="var">r</span> | <span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">A</span>) <span class="id" title="var">f</span> <span class="id" title="var">i</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">fsbigE</span> {<span class="id" title="var">R</span> <span class="id" title="var">idx</span> <span class="id" title="var">op</span> <span class="id" title="var">T</span> <span class="id" title="var">A</span>}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbig_seq</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">I</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">seq</span> <span class="id" title="var">I</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">uniq</span> <span class="id" title="var">r</span> →<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">a</span> &lt;- <span class="id" title="var">r</span>) <span class="id" title="var">F</span> <span class="id" title="var">a</span> = \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">a</span> \<span class="id" title="tactic">in</span> [<span class="id" title="tactic">set</span>` <span class="id" title="var">r</span>]) <span class="id" title="var">F</span> <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbig1</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.law</span> <span class="id" title="var">idx</span>) (<span class="id" title="var">I</span> : <span class="id" title="var">choiceType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <span class="id" title="var">P</span> <span class="id" title="var">i</span> → <span class="id" title="var">F</span> <span class="id" title="var">i</span> = <span class="id" title="var">idx</span>) → \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span> = <span class="id" title="var">idx</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbig_dflt</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.law</span> <span class="id" title="var">idx</span>) (<span class="id" title="var">I</span> : <span class="id" title="var">choiceType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">infinite_set</span> (<span class="id" title="var">P</span> `&amp;` <span class="id" title="var">F</span> @^-1` [<span class="id" title="tactic">set</span>¬ <span class="id" title="var">idx</span>])-&gt; \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span> = <span class="id" title="var">idx</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbig_widen</span> (<span class="id" title="var">T</span> : <span class="id" title="var">choiceType</span>) [<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>] [<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>) (<span class="id" title="var">P</span> <span class="id" title="var">D</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">T</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">T</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">P</span> `&lt;=` <span class="id" title="var">D</span> →<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">D</span> `\` <span class="id" title="var">P</span> `&lt;=` <span class="id" title="var">f</span> @^-1` [<span class="id" title="tactic">set</span> <span class="id" title="var">idx</span>] →<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">f</span> <span class="id" title="var">i</span> = \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">D</span>) <span class="id" title="var">f</span> <span class="id" title="var">i</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">fsbig_widen</span> {<span class="id" title="var">T</span> <span class="id" title="var">R</span> <span class="id" title="var">idx</span> <span class="id" title="var">op</span>} <span class="id" title="var">P</span> <span class="id" title="var">D</span> <span class="id" title="var">f</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbig_supp</span> (<span class="id" title="var">T</span> : <span class="id" title="var">choiceType</span>) [<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>] [<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>) (<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">T</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">T</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">f</span> <span class="id" title="var">i</span> = \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span> `&amp;` <span class="id" title="var">f</span> @^-1` [<span class="id" title="tactic">set</span>¬ <span class="id" title="var">idx</span>]) <span class="id" title="var">f</span> <span class="id" title="var">i</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbig_fwiden</span> (<span class="id" title="var">T</span> : <span class="id" title="var">choiceType</span>) [<span class="id" title="var">R</span> : <span class="id" title="var">eqType</span>] [<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">seq</span> <span class="id" title="var">T</span>) (<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">T</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">T</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">P</span> `&lt;=` [<span class="id" title="tactic">set</span>` <span class="id" title="var">r</span>] →<br/>
&nbsp;&nbsp;<span class="id" title="var">uniq</span> <span class="id" title="var">r</span> →<br/>
&nbsp;&nbsp;[<span class="id" title="tactic">set</span> <span class="id" title="var">i</span> | <span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">r</span>] `\` <span class="id" title="var">P</span> `&lt;=` <span class="id" title="var">f</span> @^-1` [<span class="id" title="tactic">set</span> <span class="id" title="var">idx</span>] →<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">f</span> <span class="id" title="var">i</span> = \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> &lt;- <span class="id" title="var">r</span>) <span class="id" title="var">f</span> <span class="id" title="var">i</span>.<br/>
 <span class="id" title="keyword">Arguments</span> <span class="id" title="var">fsbig_fwiden</span> {<span class="id" title="var">T</span> <span class="id" title="var">R</span> <span class="id" title="var">idx</span> <span class="id" title="var">op</span>} <span class="id" title="var">r</span> <span class="id" title="var">P</span> <span class="id" title="var">f</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbig_set0</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>) (<span class="id" title="var">T</span> : <span class="id" title="var">choiceType</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">F</span> : <span class="id" title="var">T</span> → <span class="id" title="var">R</span>) : \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">x</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">set0</span>) <span class="id" title="var">F</span> <span class="id" title="var">x</span> = <span class="id" title="var">idx</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbig_set1</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>) (<span class="id" title="var">T</span> : <span class="id" title="var">choiceType</span>) <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;(<span class="id" title="var">F</span> : <span class="id" title="var">T</span> → <span class="id" title="var">R</span>) : \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">y</span> \<span class="id" title="tactic">in</span> [<span class="id" title="tactic">set</span> <span class="id" title="var">x</span>]) <span class="id" title="var">F</span> <span class="id" title="var">y</span> = <span class="id" title="var">F</span> <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">__deprecated__full_fsbigID</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">I</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">B</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>) (<span class="id" title="var">A</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">finite_set</span> (<span class="id" title="var">A</span> `&amp;` <span class="id" title="var">F</span> @^-1` [<span class="id" title="tactic">set</span>¬ <span class="id" title="var">idx</span>]) →<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">A</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span> = <span class="id" title="var">op</span> (\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">A</span> `&amp;` <span class="id" title="var">B</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">A</span> `&amp;` ~` <span class="id" title="var">B</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span>).<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">__deprecated__full_fsbigID</span> {<span class="id" title="var">R</span> <span class="id" title="var">idx</span> <span class="id" title="var">op</span> <span class="id" title="var">I</span>} <span class="id" title="var">B</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbigID</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">I</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">B</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>) (<span class="id" title="var">A</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">finite_set</span> <span class="id" title="var">A</span> →<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">A</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span> = <span class="id" title="var">op</span> (\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">A</span> `&amp;` <span class="id" title="var">B</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">A</span> `&amp;` ~` <span class="id" title="var">B</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span>).<br/>
 <span class="id" title="keyword">Arguments</span> <span class="id" title="var">fsbigID</span> {<span class="id" title="var">R</span> <span class="id" title="var">idx</span> <span class="id" title="var">op</span> <span class="id" title="var">I</span>} <span class="id" title="var">B</span>.<br/>

<br/>
#[<span class="id" title="var">deprecated</span>(<span class="id" title="var">note</span>="Use fsbigID instead")]<br/>
<span class="id" title="keyword">Notation</span> <span class="id" title="var">full_fsbigID</span> := <span class="id" title="var">__deprecated__full_fsbigID</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbigU</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">I</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">finite_set</span> <span class="id" title="var">A</span> → <span class="id" title="var">finite_set</span> <span class="id" title="var">B</span> → <span class="id" title="var">A</span> `&amp;` <span class="id" title="var">B</span> `&lt;=` <span class="id" title="var">F</span> @^-1` [<span class="id" title="tactic">set</span> <span class="id" title="var">idx</span>] →<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">A</span> `|` <span class="id" title="var">B</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">op</span> (\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">A</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span>) (\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">B</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span>).<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">fsbigU</span> {<span class="id" title="var">R</span> <span class="id" title="var">idx</span> <span class="id" title="var">op</span> <span class="id" title="var">I</span>} [<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">F</span>].<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbigU0</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">I</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">finite_set</span> <span class="id" title="var">A</span> → <span class="id" title="var">finite_set</span> <span class="id" title="var">B</span> → <span class="id" title="var">A</span> `&amp;` <span class="id" title="var">B</span> `&lt;=` <span class="id" title="var">set0</span> →<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">A</span> `|` <span class="id" title="var">B</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">op</span> (\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">A</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span>) (\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">B</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span>).<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbigD1</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">I</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">i</span> : <span class="id" title="var">I</span>) (<span class="id" title="var">A</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">finite_set</span> <span class="id" title="var">A</span> → <span class="id" title="var">A</span> <span class="id" title="var">i</span> →<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">j</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">A</span>) <span class="id" title="var">F</span> <span class="id" title="var">j</span> = <span class="id" title="var">op</span> (<span class="id" title="var">F</span> <span class="id" title="var">i</span>) (\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">j</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">A</span> `\ <span class="id" title="var">i</span>) <span class="id" title="var">F</span> <span class="id" title="var">j</span>).<br/>
 <span class="id" title="keyword">Arguments</span> <span class="id" title="var">fsbigD1</span> {<span class="id" title="var">R</span> <span class="id" title="var">idx</span> <span class="id" title="var">op</span> <span class="id" title="var">I</span>} <span class="id" title="var">i</span> <span class="id" title="var">A</span> <span class="id" title="var">F</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">full_fsbig_distrr</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">zero</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">times</span> : <span class="id" title="var">Monoid.mul_law</span> <span class="id" title="var">zero</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">plus</span> : <span class="id" title="var">Monoid.add_law</span> <span class="id" title="var">zero</span> <span class="id" title="var">times</span>) (<span class="id" title="var">I</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">finite_set</span> (<span class="id" title="var">P</span> `&amp;` <span class="id" title="var">F</span> @^-1` [<span class="id" title="tactic">set</span>¬ <span class="id" title="var">zero</span>]) <span class="comment">(*NB:&nbsp;not&nbsp;needed&nbsp;in&nbsp;the&nbsp;integral&nbsp;case*)</span>→<br/>
&nbsp;&nbsp;<span class="id" title="var">times</span> <span class="id" title="var">a</span> (\<span class="id" title="var">big</span>[<span class="id" title="var">plus</span>/<span class="id" title="var">zero</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span>) =<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">plus</span>/<span class="id" title="var">zero</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">times</span> <span class="id" title="var">a</span> (<span class="id" title="var">F</span> <span class="id" title="var">i</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbig_distrr</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">zero</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">times</span> : <span class="id" title="var">Monoid.mul_law</span> <span class="id" title="var">zero</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">plus</span> : <span class="id" title="var">Monoid.add_law</span> <span class="id" title="var">zero</span> <span class="id" title="var">times</span>) (<span class="id" title="var">I</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">finite_set</span> <span class="id" title="var">P</span> <span class="comment">(*NB:&nbsp;not&nbsp;needed&nbsp;in&nbsp;the&nbsp;integral&nbsp;case*)</span> →<br/>
&nbsp;&nbsp;<span class="id" title="var">times</span> <span class="id" title="var">a</span> (\<span class="id" title="var">big</span>[<span class="id" title="var">plus</span>/<span class="id" title="var">zero</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span>) =<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">plus</span>/<span class="id" title="var">zero</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">times</span> <span class="id" title="var">a</span> (<span class="id" title="var">F</span> <span class="id" title="var">i</span>).<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mulr_fsumr</span> (<span class="id" title="var">R</span> : <span class="id" title="var">idomainType</span>) (<span class="id" title="var">I</span> : <span class="id" title="var">choiceType</span>) <span class="id" title="var">a</span> (<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span> × (\<span class="id" title="var">sum_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span>) = \<span class="id" title="var">sum_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">a</span> × <span class="id" title="var">F</span> <span class="id" title="var">i</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">mulr_fsuml</span> (<span class="id" title="var">R</span> : <span class="id" title="var">idomainType</span>) (<span class="id" title="var">I</span> : <span class="id" title="var">choiceType</span>) <span class="id" title="var">a</span> (<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;(\<span class="id" title="var">sum_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span>) × <span class="id" title="var">a</span> = \<span class="id" title="var">sum_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) (<span class="id" title="var">F</span> <span class="id" title="var">i</span> × <span class="id" title="var">a</span>).<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbig_ord</span> <span class="id" title="var">R</span> (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>) <span class="id" title="var">n</span> (<span class="id" title="var">F</span> : <span class="id" title="var">nat</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">a</span> &lt; <span class="id" title="var">n</span>) <span class="id" title="var">F</span> <span class="id" title="var">a</span> = \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">a</span> \<span class="id" title="tactic">in</span> `<span class="id" title="var">I_n</span>) <span class="id" title="var">F</span> <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbig_finite</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>) (<span class="id" title="var">T</span> : <span class="id" title="var">choiceType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">D</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">T</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">T</span> → <span class="id" title="var">R</span>) : <span class="id" title="var">finite_set</span> <span class="id" title="var">D</span> →<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">x</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">D</span>) <span class="id" title="var">F</span> <span class="id" title="var">x</span> = \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">x</span> &lt;- <span class="id" title="var">fset_set</span> <span class="id" title="var">D</span>) <span class="id" title="var">F</span> <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">fsbig2</span>.<br/>
<span class="id" title="keyword">Variables</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>).<br/>

<br/>
</div>

<div class="doc">
 Lemma reindex_inside I F P ...  : finite_set (P `&amp;` F @` [set~ id]) -&gt; ... 
 Isn't this reversed compared to reindex in bigop?  
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">reindex_fsbig</span> {<span class="id" title="var">I</span> <span class="id" title="var">J</span> : <span class="id" title="var">choiceType</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">I</span> → <span class="id" title="var">J</span>) <span class="id" title="var">P</span> <span class="id" title="var">Q</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">F</span> : <span class="id" title="var">J</span> → <span class="id" title="var">R</span>) : <span class="id" title="var">set_bij</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">h</span> →<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">j</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>) <span class="id" title="var">F</span> <span class="id" title="var">j</span> = \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">F</span> (<span class="id" title="var">h</span> <span class="id" title="var">i</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbig_image</span> {<span class="id" title="var">I</span> <span class="id" title="var">J</span> : <span class="id" title="var">choiceType</span>} <span class="id" title="var">P</span> (<span class="id" title="var">h</span> : <span class="id" title="var">I</span> → <span class="id" title="var">J</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">J</span> → <span class="id" title="var">R</span>) : <span class="id" title="var">set_inj</span> <span class="id" title="var">P</span> <span class="id" title="var">h</span> →<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">j</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">h</span> @` <span class="id" title="var">P</span>) <span class="id" title="var">F</span> <span class="id" title="var">j</span> = \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">F</span> (<span class="id" title="var">h</span> <span class="id" title="var">i</span>).<br/>
 
<br/>
</div>

<div class="doc">
 Lemma reindex_inside I F P ...  : finite_set (P `&amp;` F @` [set~ id]) -&gt; ...  
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">__deprecated__reindex_inside</span> {<span class="id" title="var">I</span> <span class="id" title="var">J</span> : <span class="id" title="var">choiceType</span>} <span class="id" title="var">P</span> <span class="id" title="var">Q</span> (<span class="id" title="var">h</span> : <span class="id" title="var">I</span> → <span class="id" title="var">J</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">J</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">bijective</span> <span class="id" title="var">h</span> → <span class="id" title="var">P</span> `&lt;=` <span class="id" title="var">h</span> @` <span class="id" title="var">Q</span> → <span class="id" title="var">Q</span> `&lt;=` <span class="id" title="var">h</span> @^-1` <span class="id" title="var">P</span> →<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">j</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">F</span> <span class="id" title="var">j</span> = \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>) <span class="id" title="var">F</span> (<span class="id" title="var">h</span> <span class="id" title="var">i</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">reindex_fsbigT</span> {<span class="id" title="var">I</span> <span class="id" title="var">J</span> : <span class="id" title="var">choiceType</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">I</span> → <span class="id" title="var">J</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">J</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">bijective</span> <span class="id" title="var">h</span> →<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">j</span> \<span class="id" title="tactic">in</span> [<span class="id" title="tactic">set</span>: <span class="id" title="var">J</span>]) <span class="id" title="var">F</span> <span class="id" title="var">j</span> = \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> [<span class="id" title="tactic">set</span>: <span class="id" title="var">I</span>]) <span class="id" title="var">F</span> (<span class="id" title="var">h</span> <span class="id" title="var">i</span>).<br/>
 
<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">fsbig2</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">reindex_fsbig</span> {<span class="id" title="var">R</span> <span class="id" title="var">idx</span> <span class="id" title="var">op</span> <span class="id" title="var">I</span> <span class="id" title="var">J</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">fsbig_image</span> {<span class="id" title="var">R</span> <span class="id" title="var">idx</span> <span class="id" title="var">op</span> <span class="id" title="var">I</span> <span class="id" title="var">J</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">__deprecated__reindex_inside</span> {<span class="id" title="var">R</span> <span class="id" title="var">idx</span> <span class="id" title="var">op</span> <span class="id" title="var">I</span> <span class="id" title="var">J</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">reindex_fsbigT</span> {<span class="id" title="var">R</span> <span class="id" title="var">idx</span> <span class="id" title="var">op</span> <span class="id" title="var">I</span> <span class="id" title="var">J</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>
#[<span class="id" title="var">deprecated</span>(<span class="id" title="var">note</span>="use reindex_fsbig, fsbig_image or reindex_fsbigT instead")]<br/>
<span class="id" title="keyword">Notation</span> <span class="id" title="var">reindex_inside</span> := <span class="id" title="var">__deprecated__reindex_inside</span>.<br/>
#[<span class="id" title="var">deprecated</span>(<span class="id" title="var">note</span>="use reindex_fsbigT instead")]<br/>
<span class="id" title="keyword">Notation</span> <span class="id" title="var">reindex_inside_setT</span> := <span class="id" title="var">reindex_fsbigT</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbigN1</span> (<span class="id" title="var">R</span> : <span class="id" title="var">eqType</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">T1</span> <span class="id" title="var">T2</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">Q</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">T2</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">T1</span> → <span class="id" title="var">T2</span> → <span class="id" title="var">R</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">T1</span>) :<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">y</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>) <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> != <span class="id" title="var">idx</span> → <span class="id" title="var">exists2</span> <span class="id" title="var">y</span>, <span class="id" title="var">Q</span> <span class="id" title="var">y</span> &amp; <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> != <span class="id" title="var">idx</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbig_split</span> (<span class="id" title="var">T</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">R</span> : <span class="id" title="var">eqType</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>) (<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">T</span>) (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">T</span> → <span class="id" title="var">R</span>) : <span class="id" title="var">finite_set</span> <span class="id" title="var">P</span> →<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">x</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">op</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) (<span class="id" title="var">g</span> <span class="id" title="var">x</span>) =<br/>
&nbsp;&nbsp;<span class="id" title="var">op</span> (\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">x</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">f</span> <span class="id" title="var">x</span>) (\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">x</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">g</span> <span class="id" title="var">x</span>).<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsumr_ge0</span> (<span class="id" title="var">R</span> : <span class="id" title="var">numDomainType</span>) (<span class="id" title="var">I</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <span class="id" title="var">P</span> <span class="id" title="var">i</span> → 0 ≤ <span class="id" title="var">F</span> <span class="id" title="var">i</span>) → 0 ≤ \<span class="id" title="var">sum_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsumr_le0</span> (<span class="id" title="var">R</span> : <span class="id" title="var">numDomainType</span>) (<span class="id" title="var">I</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <span class="id" title="var">P</span> <span class="id" title="var">i</span> → <span class="id" title="var">F</span> <span class="id" title="var">i</span> ≤ 0) → \<span class="id" title="var">sum_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span> ≤ 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsumr_gt0</span> (<span class="id" title="var">R</span> : <span class="id" title="var">realDomainType</span>) (<span class="id" title="var">I</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">seq</span> <span class="id" title="var">I</span>) (<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;0 &lt; \<span class="id" title="var">sum_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span> → <span class="id" title="var">exists2</span> <span class="id" title="var">i</span>, <span class="id" title="var">P</span> <span class="id" title="var">i</span> &amp; 0 &lt; <span class="id" title="var">F</span> <span class="id" title="var">i</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsumr_lt0</span> (<span class="id" title="var">R</span> : <span class="id" title="var">realDomainType</span>) (<span class="id" title="var">I</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;\<span class="id" title="var">sum_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span> &lt; 0 → <span class="id" title="var">exists2</span> <span class="id" title="var">i</span>, <span class="id" title="var">P</span> <span class="id" title="var">i</span> &amp; <span class="id" title="var">F</span> <span class="id" title="var">i</span> &lt; 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">pfsumr_eq0</span> (<span class="id" title="var">R</span> : <span class="id" title="var">realDomainType</span>) (<span class="id" title="var">I</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">finite_set</span> <span class="id" title="var">P</span> →<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <span class="id" title="var">P</span> <span class="id" title="var">i</span> → 0 ≤ <span class="id" title="var">F</span> <span class="id" title="var">i</span>) →<br/>
&nbsp;&nbsp;\<span class="id" title="var">sum_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span> = 0 → <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span>, <span class="id" title="var">P</span> <span class="id" title="var">i</span> → <span class="id" title="var">F</span> <span class="id" title="var">i</span> = 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbig_setU</span> {<span class="id" title="var">T</span>} {<span class="id" title="var">I</span> : <span class="id" title="var">choiceType</span>} (<span class="id" title="var">A</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="tactic">set</span> <span class="id" title="var">T</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">finite_set</span> <span class="id" title="var">A</span> →<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">setU</span>/<span class="id" title="var">set0</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">A</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span> = \<span class="id" title="var">bigcup_</span>(<span class="id" title="var">i</span> <span class="id" title="tactic">in</span> <span class="id" title="var">A</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span>.<br/>
 
<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">fsbig_setU_set1</span> {<span class="id" title="var">T</span> : <span class="id" title="var">choiceType</span>} (<span class="id" title="var">A</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">T</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">finite_set</span> <span class="id" title="var">A</span> → \<span class="id" title="var">big</span>[<span class="id" title="var">setU</span>/<span class="id" title="var">set0</span>]<span class="id" title="var">_</span>(<span class="id" title="var">x</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">A</span>) [<span class="id" title="tactic">set</span> <span class="id" title="var">x</span>] = <span class="id" title="var">A</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">pair_fsbig</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">I</span> <span class="id" title="var">J</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>) (<span class="id" title="var">Q</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">J</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="var">J</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">finite_set</span> <span class="id" title="var">P</span> → <span class="id" title="var">finite_set</span> <span class="id" title="var">Q</span> →<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">j</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span><br/>
&nbsp;&nbsp;= \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">p</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span> `*` <span class="id" title="var">Q</span>) <span class="id" title="var">F</span> <span class="id" title="var">p</span>.1 <span class="id" title="var">p</span>.2.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">exchange_fsbig</span> (<span class="id" title="var">R</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">idx</span> : <span class="id" title="var">R</span>) (<span class="id" title="var">op</span> : <span class="id" title="var">Monoid.com_law</span> <span class="id" title="var">idx</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">I</span> <span class="id" title="var">J</span> : <span class="id" title="var">choiceType</span>) (<span class="id" title="var">P</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">I</span>) (<span class="id" title="var">Q</span> : <span class="id" title="tactic">set</span> <span class="id" title="var">J</span>) (<span class="id" title="var">F</span> : <span class="id" title="var">I</span> → <span class="id" title="var">J</span> → <span class="id" title="var">R</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">finite_set</span> <span class="id" title="var">P</span> → <span class="id" title="var">finite_set</span> <span class="id" title="var">Q</span> →<br/>
&nbsp;&nbsp;\<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">j</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span><br/>
&nbsp;&nbsp;= \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">j</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">Q</span>) \<span class="id" title="var">big</span>[<span class="id" title="var">op</span>/<span class="id" title="var">idx</span>]<span class="id" title="var">_</span>(<span class="id" title="var">i</span> \<span class="id" title="tactic">in</span> <span class="id" title="var">P</span>) <span class="id" title="var">F</span> <span class="id" title="var">i</span> <span class="id" title="var">j</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>